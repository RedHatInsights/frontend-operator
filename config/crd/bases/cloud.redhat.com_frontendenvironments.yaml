---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.4
  name: frontendenvironments.cloud.redhat.com
spec:
  group: cloud.redhat.com
  names:
    kind: FrontendEnvironment
    listKind: FrontendEnvironmentList
    plural: frontendenvironments
    shortNames:
    - feenv
    singular: frontendenvironment
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.targetNamespace
      name: Namespace
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: FrontendEnvironment is the Schema for the FrontendEnvironments
          API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: FrontendEnvironmentSpec defines the desired state of FrontendEnvironment
            properties:
              akamaiCacheBustImage:
                description: Set Akamai Cache Bust Image
                type: string
              akamaiCacheBustURL:
                description: |-
                  Deprecated: Users should move to AkamaiCacheBustURLs
                  Preserving for backwards compatibility
                type: string
              akamaiCacheBustURLs:
                description: Set Akamai Cache Bust URL that the files will hang off
                  of
                items:
                  type: string
                type: array
              akamaiSecretName:
                description: The name of the secret we will use to get the akamai
                  credentials
                type: string
              bundles:
                description: For the ChromeUI to render navigation bundles
                items:
                  description: |-
                    FrontendBundles defines the bundles specific to an environment that will be used to
                    construct navigation
                  properties:
                    description:
                      type: string
                    id:
                      type: string
                    title:
                      type: string
                  required:
                  - id
                  - title
                  type: object
                type: array
              defaultReplicas:
                format: int32
                type: integer
              enableAkamaiCacheBust:
                description: Enable Akamai Cache Bust
                type: boolean
              enablePushCache:
                description: Enable Push Cache Container
                type: boolean
              generateNavJSON:
                description: |-
                  GenerateNavJSON determines if the nav json configmap
                  parts should be generated for the bundles. We want to do
                  do this in epehemeral environments but not in production
                type: boolean
              globalEnv:
                description: |-
                  GlobalEnv defines environment variables that will be injected into every Caddy pod
                  created for frontends in this environment. These variables are applied to all frontend
                  deployments and can be used for configuration that needs to be shared across all
                  frontends within the same environment.
                items:
                  description: EnvVar represents an environment variable present in
                    a Container.
                  properties:
                    name:
                      description: Name of the environment variable. Must be a C_IDENTIFIER.
                      type: string
                    value:
                      description: |-
                        Variable references $(VAR_NAME) are expanded
                        using the previously defined environment variables in the container and
                        any service environment variables. If a variable cannot be resolved,
                        the reference in the input string will be unchanged. Double $$ are reduced
                        to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e.
                        "$$(VAR_NAME)" will produce the string literal "$(VAR_NAME)".
                        Escaped references will never be expanded, regardless of whether the variable
                        exists or not.
                        Defaults to "".
                      type: string
                    valueFrom:
                      description: Source for the environment variable's value. Cannot
                        be used if value is not empty.
                      properties:
                        configMapKeyRef:
                          description: Selects a key of a ConfigMap.
                          properties:
                            key:
                              description: The key to select.
                              type: string
                            name:
                              default: ""
                              description: |-
                                Name of the referent.
                                This field is effectively required, but due to backwards compatibility is
                                allowed to be empty. Instances of this type with an empty value here are
                                almost certainly wrong.
                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                              type: string
                            optional:
                              description: Specify whether the ConfigMap or its key
                                must be defined
                              type: boolean
                          required:
                          - key
                          type: object
                          x-kubernetes-map-type: atomic
                        fieldRef:
                          description: |-
                            Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['<KEY>']`, `metadata.annotations['<KEY>']`,
                            spec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.
                          properties:
                            apiVersion:
                              description: Version of the schema the FieldPath is
                                written in terms of, defaults to "v1".
                              type: string
                            fieldPath:
                              description: Path of the field to select in the specified
                                API version.
                              type: string
                          required:
                          - fieldPath
                          type: object
                          x-kubernetes-map-type: atomic
                        resourceFieldRef:
                          description: |-
                            Selects a resource of the container: only resources limits and requests
                            (limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.
                          properties:
                            containerName:
                              description: 'Container name: required for volumes,
                                optional for env vars'
                              type: string
                            divisor:
                              anyOf:
                              - type: integer
                              - type: string
                              description: Specifies the output format of the exposed
                                resources, defaults to "1"
                              pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                              x-kubernetes-int-or-string: true
                            resource:
                              description: 'Required: resource to select'
                              type: string
                          required:
                          - resource
                          type: object
                          x-kubernetes-map-type: atomic
                        secretKeyRef:
                          description: Selects a key of a secret in the pod's namespace
                          properties:
                            key:
                              description: The key of the secret to select from.  Must
                                be a valid secret key.
                              type: string
                            name:
                              default: ""
                              description: |-
                                Name of the referent.
                                This field is effectively required, but due to backwards compatibility is
                                allowed to be empty. Instances of this type with an empty value here are
                                almost certainly wrong.
                                More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                              type: string
                            optional:
                              description: Specify whether the Secret or its key must
                                be defined
                              type: boolean
                          required:
                          - key
                          type: object
                          x-kubernetes-map-type: atomic
                      type: object
                  required:
                  - name
                  type: object
                type: array
              hostname:
                description: Hostname
                type: string
              httpHeaders:
                additionalProperties:
                  type: string
                description: |-
                  Custom HTTP Headers
                  These populate an ENV var that is then added into the caddy config as a header block
                type: object
              ingressAnnotations:
                additionalProperties:
                  type: string
                description: |-
                  Ingress annotations
                  These annotations will be applied to the ingress objects created by the frontend
                type: object
              ingressClass:
                description: Ingress class
                type: string
              limits:
                additionalProperties:
                  anyOf:
                  - type: integer
                  - type: string
                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                  x-kubernetes-int-or-string: true
                description: ResourceList is a set of (resource name, quantity) pairs.
                type: object
              monitoring:
                description: |-
                  MonitorMode determines where a ServiceMonitor object will be placed
                  local will add it to the frontend's namespace
                  app-interface will add it to "openshift-customer-monitoring"
                properties:
                  disabled:
                    type: boolean
                  mode:
                    enum:
                    - local
                    - app-interface
                    type: string
                required:
                - disabled
                - mode
                type: object
              overwriteCaddyConfig:
                description: |-
                  OverwriteCaddyConfig determines if the operator should overwrite
                  frontend container Caddyfiles with a common core Caddyfile
                type: boolean
              requests:
                additionalProperties:
                  anyOf:
                  - type: integer
                  - type: string
                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                  x-kubernetes-int-or-string: true
                description: ResourceList is a set of (resource name, quantity) pairs.
                type: object
              reverseProxyImage:
                description: Reverse Proxy Container Image
                type: string
              reverseProxyLogLevel:
                description: Log level for reverse proxy
                type: string
              reverseProxySPAEntrypointPath:
                description: SPA entrypoint path for reverse proxy
                type: string
              serviceCategories:
                description: For the ChromeUI to render additional global components
                items:
                  description: |-
                    FrontendServiceCategory defines the category to which service can inject ServiceTiles
                    Chroming UI will use this to render the service dropdown component
                  properties:
                    groups:
                      items:
                        properties:
                          id:
                            type: string
                          title:
                            type: string
                        required:
                        - id
                        - title
                        type: object
                      minItems: 1
                      type: array
                    id:
                      type: string
                    title:
                      type: string
                  required:
                  - groups
                  - id
                  - title
                  type: object
                type: array
              ssl:
                description: |-
                  SSL mode requests SSL from the services in openshift and k8s and then applies them to the
                  pod, the route is also set to reencrypt in the case of OpenShift
                type: boolean
              sso:
                description: SSO URL for authentication
                type: string
              ssoMapping:
                additionalProperties:
                  type: string
                description: |-
                  SSO URL mapping for special cases (e.g. console.dev using different SSO than stage)
                  Maps hostname patterns to SSO URLs
                type: object
              targetNamespaces:
                description: |-
                  List of namespaces that should receive a copy of the frontend configuration as a config map
                  By configurations we mean the fed-modules.json, navigation files, etc.
                items:
                  type: string
                type: array
              whitelist:
                description: Whitelist CIDRs
                items:
                  type: string
                type: array
            required:
            - sso
            type: object
          status:
            description: FrontendEnvironmentStatus defines the observed state of FrontendEnvironment
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
